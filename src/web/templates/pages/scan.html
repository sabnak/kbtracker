{% extends "base.html" %}

{% block title %}Scan Game Files - King's Bounty Tracker{% endblock %}

{% block content %}
<div class="row justify-content-center">
	<div class="col-md-8">
		<h1 class="mb-4">Scan Game Files</h1>

		<div class="alert alert-info">
			<strong>Game:</strong> {{ game.name }}<br>
			<strong>Path:</strong> {{ game.path }}
		</div>

		{% if error %}
		<div class="alert alert-warning">
			<strong>Scanner Not Implemented:</strong><br>
			{{ error }}
		</div>
		{% endif %}

		{% if success %}
		<div class="alert alert-success">
			<strong>Scan Complete!</strong><br>
			Items scanned: {{ result.items }}<br>
			Locations scanned: {{ result.locations }}<br>
			Shops scanned: {{ result.shops }}
		</div>
		{% endif %}

		<div class="card">
			<div class="card-body">
				<form method="POST" action="/games/{{ game.id }}/scan">
					<div class="mb-3">
						<label for="language" class="form-label">Select Language</label>
						<select class="form-select" id="language" name="language" required>
							<option value="">Choose language...</option>
							{% for lang in languages %}
							<option value="{{ lang.value }}">{{ lang.label }}</option>
							{% endfor %}
						</select>
						<div class="form-text">Select the game language version to scan</div>
					</div>

					<div class="d-grid gap-2">
						<button type="submit" class="btn btn-primary">Start Scan</button>
						<a href="/games" class="btn btn-secondary">Back to Games</a>
					</div>
				</form>
			</div>
		</div>

		<div class="alert alert-secondary mt-4">
			<h5>Note:</h5>
			<p>The scanner will read game data files from the mounted game directory. Make sure the game files are accessible in the Docker container at <code>/data/{{ game.path }}/</code></p>
		</div>
	</div>
</div>
{% endblock %}
